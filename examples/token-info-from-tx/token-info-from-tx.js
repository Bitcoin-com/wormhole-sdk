/*
  Get the token information for a token generated with manage-token.
*/

"use strict";

// Instantiate wormholecash
let Wormhole = require("wormholecash/lib/Wormhole").default;
let wormhole = new Wormhole({ restURL: `http://localhost:3000/v1/` });
//let wormhole = new Wormhole({ restURL: `https://trest.bitcoin.com/v1/` });

// Open the tx data generated by managed-token.
let txInfo;
try {
  txInfo = require(`../managed-token/token-tx.json`);
} catch (err) {
  console.log(
    `Could not open token-tx.json. Generate a managed token first.
    Exiting.`
  );
  console.log(err);
  process.exit(0);
}

// Get Token info from the TX.
async function getTxInfo() {
  const retVal = await wormhole.DataRetrieval.transaction(txInfo.tokenTx);

  console.log(
    `Info from TXID ${txInfo.tokenTx}: ${JSON.stringify(retVal, null, 2)}`
  );
}
getTxInfo();
